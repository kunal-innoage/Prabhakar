<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="manomano_seller_view_form" model="ir.ui.view">
        <field name="name">manomano.seller.form.view</field>
        <field name="model">manomano.seller</field>
        <field name="arch" type="xml">
            <form string="Seller Information">
                <header>
                    <button name="process_shipping_orders" string="Export Shipping Orders" type="object" class="btn btn-primary rounded shadow"/>
                    <button name="manomano_inventory_offers" string="Offer Mapping" type="object" class="btn btn-secondary rounded shadow" attrs="{'invisible': [('activate', '=', False)]}"/>
                </header>
                <sheet>

                <div class="oe_button_box" name="button_box">
                                <button name="action_view_marketplace_waiting_orders" type="object" class="oe_stat_button" icon="fa-clock-o" >
                                    <field name="manomano_sale_order_waiting_count" widget="statinfo" string="Waiting Orders"/>
                                </button>
                                <button name="action_view_marketplace_waiting_debit_payment_orders" type="object" class="oe_stat_button" icon="fa-money" >
                                    <field name="manomano_sale_order_waiting_payment_count" widget="statinfo" string="Payment Pending"/>
                                </button>
                                <button name="action_view_marketplace_shipping_orders" type="object" class="oe_stat_button" icon="fa-truck" >
                                    <field name="manomano_sale_order_shipping_count" widget="statinfo" string="Shipping Orders"/>
                                </button>
                                <button name="action_view_marketplace_shipped_orders" type="object" class="oe_stat_button" icon="fa-road" >
                                    <field name="manomano_sale_order_shipped_count" widget="statinfo" string="Shipped Orders"/>
                                </button>
                                <button name="action_view_sale_orders" type="object"  class="oe_stat_button" icon="fa-cubes" >
                                    <field name="total_sale_order_count" widget="statinfo" string="Sale Orders"/>
                                </button>
                                <button name="action_view_marketplace_offers" type="object" class="oe_stat_button" icon="fa-gift" >
                                    <field name="total_offer_count" widget="statinfo" string="Offers"/>
                                </button>
                                <button name="action_view_marketplace_carriers" type="object" class="oe_stat_button" icon="fa-car" >
                                    <field name="carrier_count" widget="statinfo" string="Carriers"/>
                                </button>
                                <button name="action_view_manomano_sale_order" string="Import Orders" type="object" class="oe_stat_button" icon="fa-usd" >
                                </button>
                            </div>
                    <group>
                        <group>
                            <field name="name"></field>
                            <field name="warehouse_id"></field>
                        </group>
                        <group>
                            <field name = "activate"/>
                        </group>
                    </group>
                    <notebook>
                        <page name="config" string="Configuration" groups="base.group_system">
                            <group>
                                <field name="api_key"/>
                                <field name="seller_contract_id"/>
                                <field name="geting_url"/>

                            </group>

                        </page>
                        <page name = "orders" string= "Order Management" attrs="{'invisible': [('activate', '=',False)]}">
                        
                            
                            <group>
                                <group attrs="{'invisible': [('is_filter_activate', '=',True)]}"> 
                                    <button name="get_all_orders" string="Get ALL Orders" type="object" class="btn btn-primary rounded shadow" />
                                </group>
                                <group attrs="{'invisible': [('is_filter_activate', '=',False)]}">
                                    <button name="get_all_orders" string="Get Orders" type="object" class="btn btn-primary rounded shadow"/>
                                </group>
                                <group>
                                        <field name="is_filter_activate"/>
                                </group>
    
                            </group>

                            <group>
                                <group> 
                                    <field name = "order_reference" attrs="{'invisible': [('is_filter_activate', '=',False)]}"/>
                                    <field name = "manomano_status" attrs="{'invisible': [('is_filter_activate', '=',False)]}"/>
                                    <field name = "carrier" attrs="{'invisible': [('is_filter_activate', '=',False)]}"/>
                                    <field name = "limit" attrs="{'invisible': [('is_filter_activate', '=',False)]}" readonly="1"/>
                                </group>
                                <group>
                                    <field name = "date_filter" attrs="{'invisible': [('is_filter_activate', '=',False)]}"/>
                                    <field name = "created_at_start" attrs="{'invisible': [('date_filter', '=',False)]}"/>
                                    <field name = "created_at_end" attrs="{'invisible': [('date_filter', '=',False)]}"/>
                                    <field name = "status_updated_at_start" attrs="{'invisible': [('date_filter', '=',False)]}"/>
                                    <field name = "status_updated_at_end" attrs="{'invisible': [('date_filter', '=',False)]}"/>
                                </group>
                            </group>
                        </page>


                    </notebook>
                    
                </sheet>
            </form>
        </field>
    </record>

    <record id="manomano_seller_view_kanban" model="ir.ui.view">
        <field name="name">manomano_seller.view.kanban</field>
        <field name="model">manomano.seller</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="name"></field>
                <field name="warehouse_id"></field>
                <field name="total_offer_count"></field>
                <field name="total_sale_order_count"></field>
                <field name="manomano_sale_order_waiting_count"></field>
                <field name="manomano_sale_order_waiting_payment_count"></field>
                <field name="manomano_sale_order_shipping_count"></field>
                <field name="manomano_sale_order_shipped_count"></field>
                <templates>
                    <t t-name="kanban-box">
                                <div t-attf-class="oe_kanban_global_click shadow rounded border-light mb-3">
                                    <div class="row">
                                        <div class="col-6">
                                            <strong class="o_kanban_record_title"><span style="font-size: 24px;"><t t-esc="record.name.value"/></span></strong>
                                        </div>
                                        <div class="col-6 text-muted mb-2 text-center">
                                            <span class="text-warning"><t t-esc="record.warehouse_id.value"/></span>
                                        </div>
                                    </div>
                                    <div class="row mt8">
                                        <div class="col-6 text-muted mb-2">
                                            <span class="text-primary float-left">Waiting Orders : <t t-esc="record.manomano_sale_order_waiting_count.value"/></span>
                                        </div>
                                        <div class="col-6 text-muted">
                                            <span class="text-info float-right">Payment Pending: <t t-esc="record.manomano_sale_order_waiting_payment_count.value"/></span>
                                        </div>
                                        <div class="col-6 text-muted">
                                            <span class="float-left">Shipping : <t t-esc="record.manomano_sale_order_shipping_count.value"/></span>
                                        </div>
                                        <div class="col-6 text-muted">
                                            <span class="float-right">Shipped : <t t-esc="record.manomano_sale_order_shipped_count.value"/></span>
                                        </div>
                                        <div class="col-6 text-muted mb-2">
                                            <span class="text-warning">Offer : <t t-esc="record.total_offer_count.value"/></span>
                                        </div>
                                        <div class="col-6 text-muted mb-2">
                                            <span class="text-success float-right">Total Orders : <t t-esc="record.total_sale_order_count.value"/></span>
                                        </div>
                                    </div>
                                </div>
                            </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="action_manomano_seller_form" model="ir.actions.act_window" >
        <field name="name">Seller</field>
        <field name="res_model">manomano.seller</field>
        <field name="view_mode">kanban,form,tree</field>
    </record>

    <menuitem
        id="manomano_root_shop"
        name="ManoMano"
        parent="odoo_mirakl_integration.menu_multiple_shops"
        action="action_manomano_seller_form"
        sequence="100"/>   

    
    <record model="ir.actions.server" id="get_all_shop_waiting_orders">
        <field name="name">Get Waiting Orders</field>
        <field name="model_id" ref="model_manomano_seller"/>
        <field name="binding_view_types">form,list</field>
        <field name="binding_model_id" ref="model_manomano_seller"/>
        <field name="state">code</field>
        <field name="code">
           action = records.get_all_shop_waiting_orders()
        </field>
    </record>

    <record model="ir.actions.server" id="get_all_shop_shipping_orders">
        <field name="name">Get Shipping Orders</field>
        <field name="model_id" ref="model_manomano_seller"/>
        <field name="binding_view_types">form,list</field>
        <field name="binding_model_id" ref="model_manomano_seller"/>
        <field name="state">code</field>
        <field name="code">
           action = records.get_all_shop_shipping_orders()
        </field>
    </record>

    <record model="ir.actions.server" id="update_all_shop_waiting_orders">
        <field name="name">Update Waiting Orders</field>
        <field name="model_id" ref="model_manomano_seller"/>
        <field name="binding_view_types">form,list</field>
        <field name="binding_model_id" ref="model_manomano_seller"/>
        <field name="state">code</field>
        <field name="code">
           action = records.update_all_shop_waiting_orders()
        </field>
    </record>

    <record model="ir.actions.server" id="accept_all_shops_waiting_orders">
        <field name="name">Accept Waiting Orders</field>
        <field name="model_id" ref="model_manomano_seller"/>
        <field name="binding_view_types">form,list</field>
        <field name="binding_model_id" ref="model_manomano_seller"/>
        <field name="state">code</field>
        <field name="code">
           action = records.accept_all_shops_waiting_orders()
        </field>
    </record>

    <record model="ir.actions.server" id="process_all_shop_orders">
        <field name="name">Process Shipping Orders</field>
        <field name="model_id" ref="model_manomano_seller"/>
        <field name="binding_view_types">form,list</field>
        <field name="binding_model_id" ref="model_manomano_seller"/>
        <field name="state">code</field>
        <field name="code">
           action = records.process_all_shop_orders()
        </field>
    </record>

</odoo>
